<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Xenomai: Thread scheduling control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__cobalt__core__sched.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Thread scheduling control<div class="ingroups"><a class="el" href="group__cobalt.html">Cobalt</a> &raquo; <a class="el" href="group__cobalt__core.html">Cobalt kernel</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Thread scheduling control:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__cobalt__core__sched.png" border="0" alt="" usemap="#group____cobalt____core____sched"/>
<map name="group____cobalt____core____sched" id="group____cobalt____core____sched">
<area shape="rect" id="node1" href="group__sched__quota.html" title="The SCHED_QUOTA policy enforces a limitation on the CPU consumption of threads over a globally define..." alt="" coords="371,5,561,47"/><area shape="rect" id="node2" href="group__cobalt__core.html" title="The Cobalt core is a co&#45;kernel which supplements the Linux kernel for delivering real&#45;time services w..." alt="" coords="5,13,104,39"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__sched__quota"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sched__quota.html">SCHED_QUOTA scheduling policy</a></td></tr>
<tr class="memdesc:group__sched__quota"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SCHED_QUOTA policy enforces a limitation on the CPU consumption of threads over a globally defined period, known as the quota interval. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxnsched.html">xnsched</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scheduling information structure.  <a href="structxnsched.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab51b1711cd73d890278e3998c817cc3a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__sched.html#gab51b1711cd73d890278e3998c817cc3a">xnsched_run</a> (void)</td></tr>
<tr class="memdesc:gab51b1711cd73d890278e3998c817cc3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The rescheduling procedure.  <a href="#gab51b1711cd73d890278e3998c817cc3a">More...</a><br /></td></tr>
<tr class="separator:gab51b1711cd73d890278e3998c817cc3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4cb702f4a99401c3c1c73811f55e990f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__sched.html#ga4cb702f4a99401c3c1c73811f55e990f">xnsched_rotate</a> (struct <a class="el" href="structxnsched.html">xnsched</a> *sched, struct xnsched_class *sched_class, const union xnsched_policy_param *sched_param)</td></tr>
<tr class="memdesc:ga4cb702f4a99401c3c1c73811f55e990f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotate a scheduler runqueue.  <a href="#ga4cb702f4a99401c3c1c73811f55e990f">More...</a><br /></td></tr>
<tr class="separator:ga4cb702f4a99401c3c1c73811f55e990f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga4cb702f4a99401c3c1c73811f55e990f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void xnsched_rotate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxnsched.html">xnsched</a> *&#160;</td>
          <td class="paramname"><em>sched</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct xnsched_class *&#160;</td>
          <td class="paramname"><em>sched_class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const union xnsched_policy_param *&#160;</td>
          <td class="paramname"><em>sched_param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rotate a scheduler runqueue. </p>
<p>The specified scheduling class is requested to rotate its runqueue for the given scheduler. Rotation is performed according to the scheduling parameter specified by <em>sched_param</em>.</p>
<dl class="section note"><dt>Note</dt><dd>The nucleus supports round-robin scheduling for the members of the RT class.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sched</td><td>The per-CPU scheduler hosting the target scheduling class.</td></tr>
    <tr><td class="paramname">sched_class</td><td>The scheduling class which should rotate its runqueue.</td></tr>
    <tr><td class="paramname">sched_param</td><td>The scheduling parameter providing rotation information to the specified scheduling class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">unrestricted, atomic-entry</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gab51b1711cd73d890278e3998c817cc3a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int xnsched_run </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The rescheduling procedure. </p>
<p>This is the central rescheduling routine which should be called to validate and apply changes which have previously been made to the nucleus scheduling state, such as suspending, resuming or changing the priority of threads. This call performs context switches as needed. <a class="el" href="group__cobalt__core__sched.html#gab51b1711cd73d890278e3998c817cc3a" title="The rescheduling procedure. ">xnsched_run()</a> schedules out the current thread if:</p>
<ul>
<li>the current thread is about to block.</li>
<li>a runnable thread from a higher priority scheduling class is waiting for the CPU.</li>
<li>the current thread does not lead the runnable threads from its own scheduling class (i.e. round-robin).</li>
</ul>
<p>The Cobalt core implements a lazy rescheduling scheme so that most of the services affecting the threads state MUST be followed by a call to the rescheduling procedure for the new scheduling state to be applied.</p>
<p>In other words, multiple changes on the scheduler state can be done in a row, waking threads up, blocking others, without being immediately translated into the corresponding context switches. When all changes have been applied, <a class="el" href="group__cobalt__core__sched.html#gab51b1711cd73d890278e3998c817cc3a" title="The rescheduling procedure. ">xnsched_run()</a> should be called for considering those changes, and possibly switching context.</p>
<p>As a notable exception to the previous principle however, every action which ends up suspending the current thread begets an implicit call to the rescheduling procedure on behalf of the blocking service.</p>
<p>Typically, self-suspension or sleeping on a synchronization object automatically leads to a call to the rescheduling procedure, therefore the caller does not need to explicitly issue <a class="el" href="group__cobalt__core__sched.html#gab51b1711cd73d890278e3998c817cc3a" title="The rescheduling procedure. ">xnsched_run()</a> after such operations.</p>
<p>The rescheduling procedure always leads to a null-effect if it is called on behalf of an interrupt service routine. Any outstanding scheduler lock held by the outgoing thread will be restored when the thread is scheduled back in.</p>
<p>Calling this procedure with no applicable context switch pending is harmless and simply leads to a null-effect.</p>
<dl class="section return"><dt>Returns</dt><dd>Non-zero is returned if a context switch actually happened, otherwise zero if the current thread was left running.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">unrestricted</a> </dd></dl>

<p>References <a class="el" href="structxnsched.html#afd2e6c15e470a38b385930c613856e7b">xnsched::curr</a>.</p>

<p>Referenced by <a class="el" href="group__rtdm__sync__event.html#ga1217402b82034b26fe25c26f1e5b32c9">rtdm_event_signal()</a>, <a class="el" href="group__rtdm__sync__mutex.html#gab40ed579324d8cc76387a0e06dd0f82a">rtdm_mutex_unlock()</a>, <a class="el" href="group__rtdm__sync__sem.html#ga829dbd8c5709d798ed06947b27001fed">rtdm_sem_up()</a>, <a class="el" href="group__cobalt__core__registry.html#ga28aefd9be7367aa495753142005e1d5a">xnregistry_enter()</a>, <a class="el" href="group__cobalt__core__select.html#ga8546a4a6f997a8c29451673d5b7f0e86">xnselect_bind()</a>, <a class="el" href="group__cobalt__core__select.html#ga56e4b5bf3e35dd80c23e95cad8fa1614">xnselect_destroy()</a>, <a class="el" href="group__cobalt__core__thread.html#gabcf46b2b38ac68322f354adc408c2732">xnthread_cancel()</a>, <a class="el" href="group__cobalt__core__thread.html#gae78ee27f53ae4d947b271b98748c78e9">xnthread_migrate()</a>, <a class="el" href="group__cobalt__core__thread.html#ga3c57e5332785644f1dc0c95ad2ee5097">xnthread_set_mode()</a>, and <a class="el" href="group__cobalt__core__thread.html#gabedfb90d24b08db04e49b168d290e032">xnthread_start()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
